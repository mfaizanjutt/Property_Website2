!function(e){"use strict";window.essb_ajax_subscribe=function(s,t){t.preventDefault();var o=e(".essb-subscribe-form-"+s+" #essb-subscribe-from-content-form-mailchimp"),i=e(".essb-subscribe-form-"+s+" .essb-subscribe-form-content"),r=e(i).attr("data-position")||"",n=e(i).attr("data-design")||"";if(o.length){if(e(o).find(".essb-subscribe-confirm").length&&!e(o).find(".essb-subscribe-confirm").is(":checked"))return t.preventDefault(),void(essb_settings.subscribe_terms_error?alert(essb_settings.subscribe_terms_error):alert("You need to confirm that you agree with our terms"));if(e(o).find(".essb-subscribe-form-content-name-field").length&&essb_settings.subscribe_validate_name&&""==e(o).find(".essb-subscribe-form-content-name-field").val())return void(essb_settings.subscribe_validate_name_error?alert(essb_settings.subscribe_validate_name_error):alert("You need to fill name field too"));var c=e(o).find(".essb-subscribe-form-content-email-field").val(),a=e(o).find(".essb-subscribe-form-content-name-field").length?e(o).find(".essb-subscribe-form-content-name-field").val():"";e(o).find(".submit").prop("disabled",!0),e(o).hide(),e(".essb-subscribe-form-"+s).find(".essb-subscribe-loader").show();var b=o.attr("action")+"&mailchimp_email="+c+"&mailchimp_name="+a+"&position="+r+"&design="+n+"&title="+encodeURIComponent(document.title);window.location.href.indexOf("https://")>-1&&-1==b.indexOf("https://")&&(b=b.replace("http://","https://")),e(".essb-subscribe-captcha").length&&(b+="&validate_recaptcha=true&recaptcha="+e("#g-recaptcha-response").val()),e.post(b,{mailchimp_email1:c,mailchimp_name1:a},function(t){if(t){if(console.log(t),"1"==t.code)e(".essb-subscribe-form-"+s).find(".essb-subscribe-form-content-success").show(),e(".essb-subscribe-form-"+s).find(".essb-subscribe-form-content-error").hide(),e(o).hide(),"undefined"!=typeof essb_subscribe_tracking&&essb_subscribe_tracking(r),"undefined"!=typeof essbSubscribeProLog&&essbSubscribeProLog("subscribe_conversion_success",r,n),t.redirect&&setTimeout(function(){t.redirect_new?window.open(t.redirect,"_blank").focus():window.location.href=t.redirect},200),window.pendingUnlockOnSubscribe&&essb_optin_locker_unlock(),essb.trigger("subscribe_success",{design:n,position:r,email:c,name:a});else{"undefined"!=typeof essbSubscribeProLog&&essbSubscribeProLog("subscribe_conversion_fail",r,n);var i=e(".essb-subscribe-form-"+s).find(".essb-subscribe-form-content-error").attr("data-message")||"";""==i&&e(".essb-subscribe-form-"+s).find(".essb-subscribe-form-content-error").attr("data-message",e(".essb-subscribe-form-"+s).find(".essb-subscribe-form-content-error").text()),90==t.code?e(".essb-subscribe-form-"+s).find(".essb-subscribe-form-content-error").text(t.message):e(".essb-subscribe-form-"+s).find(".essb-subscribe-form-content-error").text(i),e(".essb-subscribe-form-"+s).find(".essb-subscribe-form-content-error").show(),e(".essb-subscribe-form-"+s).find(".essb-subscribe-from-content-form").show(),e(o).find(".submit").prop("disabled",!1)}e(".essb-subscribe-form-"+s).find(".essb-subscribe-loader").hide()}},"json")}},e(document).ready(function(){var s=!1,t=0,o=0,i=window.essb_manualform_show=function(){r("manual"),s=!1},r=function(t){if(!s){var o=".essb-optinbooster-"+t,i=".essb-optinbooster-overlay-"+t;if(e(o).length){var r=e(o).attr("data-single")||"",n=e(o).attr("data-single-days")||"";if("1"==r){if("yes"==b("essbOptinBooster"))return;a("essbOptinBooster","yes",n=""!=n&&Number(n)?Number(n):14)}jQuery.fn.extend({center:function(){return this.each(function(){var e=(jQuery(window).height()-jQuery(this).outerHeight())/2,s=(jQuery(window).width()-jQuery(this).outerWidth())/2;jQuery(this).css({position:"fixed",margin:0,top:(e>0?e:0)+"px",left:(s>0?s:0)+"px"})})}});var c=jQuery(window).width(),u=(jQuery("document").height(),700);if(c<u&&(u=c-60),e(o).css({width:u+"px"}),e(o).center(),e(o).fadeIn(400),e(i).fadeIn(200),e(o).addClass("active-booster"),e(i).addClass("active-booster-overlay"),s=!0,"undefined"!=typeof essbSubscribeProLog){var l=e(o+" .essb-subscribe-form-content").data("position")||"",d=e(o+" .essb-subscribe-form-content").data("design")||"";essbSubscribeProLog("subscribe_conversion_loaded",l,d)}}}},n=function(){e(".active-booster").fadeOut(200),e(".active-booster").removeClass("active-booster"),e(".active-booster-overlay").fadeOut(400),e(".active-booster-overlay").removeClass("active-booster-overlay")};e(".essb-optinbooster-exit")&&jQuery(document).on("mouseleave",function(e){e.clientY<0&&r("exit")});if(e(".essb-optinbooster-scroll")&&(t=e(".essb-optinbooster-scroll").attr("data-scroll")||"",t=parseFloat(t),e(window).on("scroll",function(){s||jQuery(window).scrollTop()/(jQuery(document).height()-jQuery(window).height())*100>t&&t>0&&r("scroll")})),e(".essb-optinbooster-time")&&(o=e(".essb-optinbooster-time").attr("data-delay")||"",o=parseFloat(o),o*=1e3,setTimeout(function(){r("time")},o)),e(".essb-optinbooster-manual").length){var c=e(".essb-optinbooster-manual").data("manual-selector")||"";""!=c&&e(c).length&&e(c).on("click",function(e){e.preventDefault(),i()})}function a(e,s,t){var o=new Date;o.setTime(o.getTime()+24*t*60*60*1e3);var i="expires="+o.toGMTString();document.cookie=e+"="+s+"; "+i+"; path=/"}function b(e){for(var s=e+"=",t=document.cookie.split(";"),o=0;o<t.length;o++){var i=t[o].trim();if(0==i.indexOf(s))return i.substring(s.length,i.length)}return""}e(".essb-optinbooster-overlay").each(function(){e(this).on("click",function(e){e.preventDefault(),n()})}),e(".essb-optinbooster-close").each(function(){e(this).on("click",function(e){e.preventDefault(),n()})});var u=!1,l=0,d=0,f=function(s){if(!u){var t=".essb-optinflyout-"+s;if(e(t).length){if("1"==(e(t).attr("data-single")||"")){if("yes"==b("essbOptinFlyout"))return;a("essbOptinFlyout","yes",14)}jQuery.fn.extend({center:function(){return this.each(function(){var e=(jQuery(window).height()-jQuery(this).outerHeight())/2,s=(jQuery(window).width()-jQuery(this).outerWidth())/2;jQuery(this).css({position:"fixed",margin:0,top:(e>0?e:0)+"px",left:(s>0?s:0)+"px"})})}});var o=jQuery(window).width(),i=(jQuery("document").height(),500);if(o<i&&(i=o-60),e(t).css({width:i+"px"}),e(t).slideDown(400),e(t).addClass("active-flyout"),u=!0,"undefined"!=typeof essbSubscribeProLog){var r=e(t+" .essb-subscribe-form-content").data("position")||"",n=e(t+" .essb-subscribe-form-content").data("design")||"";essbSubscribeProLog("subscribe_conversion_loaded",r,n)}}}},m=function(){e(".active-flyout").fadeOut(200),e(".active-flyout").removeClass("active-flyout")};e(".essb-optinflyout-exit")&&e(document).mouseout(function(){var e=window.event;if(e){var s=e.relatedTarget||e.toElement;s&&"HTML"!==s.nodeName||f("exit")}});e(".essb-optinflyout-scroll")&&(l=e(".essb-optinflyout-scroll").attr("data-scroll")||"",l=parseFloat(l),e(window).on("scroll",function(){u||jQuery(window).scrollTop()/(jQuery(document).height()-jQuery(window).height())*100>l&&l>0&&f("scroll")})),e(".essb-optinflyout-time")&&(d=e(".essb-optinflyout-time").attr("data-delay")||"",d=parseFloat(d),d*=1e3,setTimeout(function(){f("time")},d)),e(".essb-optinflyout-overlay").each(function(){e(this).on("click",function(e){e.preventDefault(),m()})}),e(".essb-optinflyout-close").each(function(){e(this).on("click",function(e){e.preventDefault(),m()})});var p=!1,h=0,v=0,y=(window.pendingUnlockOnSubscribe=!1,window.essb_optin_locker_unlock=function(){w();var s=e(".essb-optinlocker").data("unlock")||"";Number(s)||(s=90),a("essb_optin_locker_unlocked","yes",s)},function(s){if(!p){var t=".essb-optinlocker-"+s,o=".essb-optinlocker-overlay-"+s;if(e(t).length&&"yes"!=b("essb_optin_locker_unlocked")){jQuery.fn.extend({center:function(){return this.each(function(){var e=(jQuery(window).height()-jQuery(this).outerHeight())/2,s=(jQuery(window).width()-jQuery(this).outerWidth())/2;jQuery(this).css({position:"fixed",margin:0,top:(e>0?e:0)+"px",left:(s>0?s:0)+"px"})})}});var i=jQuery(window).width(),r=(jQuery("document").height(),700);if(i<r&&(r=i-60),e(t).css({width:r+"px"}),e(t).center(),e(t).fadeIn(400),e(o).fadeIn(200),e(t).addClass("active-locker"),e(o).addClass("active-locker-overlay"),e("body").addClass("removeScroll"),p=!0,window.pendingUnlockOnSubscribe=!0,"undefined"!=typeof essbSubscribeProLog){var n=e(t+" .essb-subscribe-form-content").data("position")||"",c=e(t+" .essb-subscribe-form-content").data("design")||"";essbSubscribeProLog("subscribe_conversion_loaded",n,c)}}}}),w=function(){e(".active-locker").fadeOut(200),e(".active-locker").removeClass("active-locker"),e(".active-locker-overlay").fadeOut(400),e(".active-locker-overlay").removeClass("active-locker-overlay"),e("body").removeClass("removeScroll")};e(".essb-optinlocker-scroll")&&(h=e(".essb-optinlocker-scroll").attr("data-scroll")||"",h=parseFloat(h),e(window).on("scroll",function(){p||jQuery(window).scrollTop()/(jQuery(document).height()-jQuery(window).height())*100>h&&h>0&&y("scroll")})),e(".essb-optinlocker-time")&&(v=e(".essb-optinlocker-time").attr("data-delay")||"",v=parseFloat(v),v=1e3*o,setTimeout(function(){y("time")},v)),e(".essb-optinlocker-close").each(function(){e(this).on("click",function(e){e.preventDefault(),w()})})})}(jQuery);